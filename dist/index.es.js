import e,{useRef as t,useMemo as n,useEffect as o,useCallback as r}from"react";import{useSpring as i,a}from"react-spring";function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function f(){}function p(){}p.resetWarningCache=f;var y,m,v=(function(e){e.exports=function(){function e(e,t,n,o,r,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:p,resetWarningCache:f};return n.PropTypes=n,n}()}(m={path:y,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&m.path)}},m.exports),m.exports);var h=!1;if("undefined"!=typeof window){var g={get passive(){h=!0}};window.addEventListener("testPassive",null,g),window.removeEventListener("testPassive",null,g)}var b="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),w=[],T=!1,O=-1,E=void 0,S=void 0,P=void 0,j=function(e){return w.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},I=function(e){var t=e||window.event;return!!j(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},x=function(){void 0!==P&&(document.body.style.paddingRight=P,P=void 0),void 0!==E&&(document.body.style.overflow=E,E=void 0)},C=function(){if(void 0!==S){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=S.position,document.body.style.top=S.top,document.body.style.left=S.left,window.scrollTo(t,e),S=void 0}},_=function(e,t){if(e){if(!w.some((function(t){return t.targetElement===e}))){var n={targetElement:e,options:t||{}};w=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(w),[n]),b?window.requestAnimationFrame((function(){if(void 0===S){S={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window,t=e.scrollY,n=e.scrollX,o=e.innerHeight;document.body.style.position="fixed",document.body.style.top=-t,document.body.style.left=-n,setTimeout((function(){return window.requestAnimationFrame((function(){var e=o-window.innerHeight;e&&t>=o&&(document.body.style.top=-(t+e))}))}),300)}})):function(e){if(void 0===P){var t=!!e&&!0===e.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;if(t&&n>0){var o=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);P=document.body.style.paddingRight,document.body.style.paddingRight=o+n+"px"}}void 0===E&&(E=document.body.style.overflow,document.body.style.overflow="hidden")}(t),b&&(e.ontouchstart=function(e){1===e.targetTouches.length&&(O=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var n=e.targetTouches[0].clientY-O;!j(e.target)&&(t&&0===t.scrollTop&&n>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&n<0?I(e):e.stopPropagation())}(t,e)},T||(document.addEventListener("touchmove",I,h?{passive:!1}:void 0),T=!0))}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")};var A="TransitionLayout-module_TransitionLayout__3nK1h";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".TransitionLayout-module_TransitionLayout__3nK1h {\n  display: inline-block;\n}");var L=function(c){var l=c.mode,d=c.useTransitionLayoutDivContainer,f=void 0===d||d,p=c.target,y=c.isTrigger,m=c.handleIsTransitionStart,v=c.handleIsTransitionOver,g=c.className,E=c.children,S=c.Component,P=t(),j=t(),L=t(l),R=n((function(){return{x:0,y:0,scale:1,transformOrigin:"left top",opacity:"go"===l?1:0}}),[l]),B=s(i((function(){return R}),[]),2),D=B[0],N=B[1];o((function(){return L.current=l,function(){}}),[l]);var k=n((function(){return S&&e.forwardRef(S)}),[S]);o((function(){return p&&("string"==typeof p?j.current=document.getElementById(p):j=p),function(){b&&(w.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),T&&(document.removeEventListener("touchmove",I,h?{passive:!1}:void 0),T=!1),O=-1),b?C():x(),w=[]}}),[p]);var q=r((function(){var e=j.current.getBoundingClientRect(),t=e.width;e.height;var n=e.left,o=e.top,r=P.current.getBoundingClientRect(),i=r.width;return r.height,{x:n-r.left,y:o-r.top,scale:t/i}}),[]),H=r((function(){_(),j.current.style.opacity="0",m&&m()}),[]),W=r((function(){var e;e?(w=w.filter((function(t){return t.targetElement!==e})),b&&(e.ontouchstart=null,e.ontouchmove=null,T&&0===w.length&&(document.removeEventListener("touchmove",I,h?{passive:!1}:void 0),T=!1)),b?C():x()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices."),"go"===L.current&&(j.current.style.opacity="1",P.current.style.opacity="0"),v&&v()}),[v]);return o((function(){if(y){var e=q(),t="go"===L.current?{from:R,to:e}:{from:e,to:R};t.from=u(u({},t.from),{},{opacity:1}),t.to=u(u({},t.to),{},{opacity:1}),N(u({reset:!0,onStart:H,onRest:W},t))}return function(){}}),[y,R]),f?e.createElement(a.div,{ref:P,className:"".concat(A," ").concat(g),style:D},E):k?e.createElement(k,{ref:P,className:g}):e.cloneElement(E,{ref:P,className:g})};L.propTypes={useTransitionLayoutDivContainer:v.bool,target:v.oneOfType([v.array,v.object]).isRequired,handleIsTransitionStart:v.func,handleIsTransitionOver:v.func};export{L as TransitionLayout};
//# sourceMappingURL=index.es.js.map
