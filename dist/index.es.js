import e,{useRef as t,useMemo as n,useEffect as o,useCallback as r}from"react";import{useSpring as i,a}from"react-spring";function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function d(){}function f(){}f.resetWarningCache=d;var p,y,m=(function(e){e.exports=function(){function e(e,t,n,o,r,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:f,resetWarningCache:d};return n.PropTypes=n,n}()}(y={path:p,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&y.path)}},y.exports),y.exports);var v=!1;if("undefined"!=typeof window){var h={get passive(){v=!0}};window.addEventListener("testPassive",null,h),window.removeEventListener("testPassive",null,h)}var g="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),b=[],w=!1,T=-1,O=void 0,E=void 0,S=void 0,P=function(e){return b.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},j=function(e){var t=e||window.event;return!!P(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},I=function(){void 0!==S&&(document.body.style.paddingRight=S,S=void 0),void 0!==O&&(document.body.style.overflow=O,O=void 0)},x=function(){if(void 0!==E){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=E.position,document.body.style.top=E.top,document.body.style.left=E.left,window.scrollTo(t,e),E=void 0}},C=function(e,t){if(e){if(!b.some((function(t){return t.targetElement===e}))){var n={targetElement:e,options:t||{}};b=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(b),[n]),g?window.requestAnimationFrame((function(){if(void 0===E){E={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window,t=e.scrollY,n=e.scrollX,o=e.innerHeight;document.body.style.position="fixed",document.body.style.top=-t,document.body.style.left=-n,setTimeout((function(){return window.requestAnimationFrame((function(){var e=o-window.innerHeight;e&&t>=o&&(document.body.style.top=-(t+e))}))}),300)}})):function(e){if(void 0===S){var t=!!e&&!0===e.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;if(t&&n>0){var o=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);S=document.body.style.paddingRight,document.body.style.paddingRight=o+n+"px"}}void 0===O&&(O=document.body.style.overflow,document.body.style.overflow="hidden")}(t),g&&(e.ontouchstart=function(e){1===e.targetTouches.length&&(T=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var n=e.targetTouches[0].clientY-T;!P(e.target)&&(t&&0===t.scrollTop&&n>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&n<0?j(e):e.stopPropagation())}(t,e)},w||(document.addEventListener("touchmove",j,v?{passive:!1}:void 0),w=!0))}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")};var _="TransitionLayout-module_TransitionLayout__3nK1h";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".TransitionLayout-module_TransitionLayout__3nK1h {\n  display: inline-block;\n}");var A=function(s){var d=s.mode,f=s.useTransitionLayoutDivContainer,p=void 0===f||f,y=s.target,m=s.isTrigger,h=s.handleIsTransitionStart,O=s.handleIsTransitionOver,E=s.className,S=s.children,P=s.Component,A=t(),L=t(),R=t(d),D=n((function(){return{x:0,y:0,scale:1,transformOrigin:"center center"}}),[]),B=l(i((function(){return D}),[]),2),N=B[0],k=B[1];console.log(d),o((function(){return R.current=d,function(){}}),[d]);var q=n((function(){return P&&e.forwardRef(P)}),[P]);o((function(){return"string"==typeof y?L.current=document.getElementById(y):L=y,function(){g&&(b.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),w&&(document.removeEventListener("touchmove",j,v?{passive:!1}:void 0),w=!1),T=-1),g?x():I(),b=[]}}),[y]);var H=r((function(){var e=L.current.getBoundingClientRect(),t=e.width;e.height;var n=e.left,o=e.top,r=A.current.getBoundingClientRect(),i=r.width;return r.height,{x:n-r.left,y:o-r.top,scale:t/i}}),[]),W=r((function(){C(),L.current.style.opacity="0",h&&h()}),[]),M=r((function(){var e;e?(b=b.filter((function(t){return t.targetElement!==e})),g&&(e.ontouchstart=null,e.ontouchmove=null,w&&0===b.length&&(document.removeEventListener("touchmove",j,v?{passive:!1}:void 0),w=!1)),g?x():I()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices."),L.current.style.opacity="1",O&&O()}),[O]);return o((function(){if(m){console.log(R.current);var e=H(),t="go"===R.current?{from:D,to:e}:{from:e,to:D};t.from.transformOrigin="".concat(e.x<0?"left":"right"," ").concat(e.y<0?"top":"bottom"),k(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({reset:!0,onStart:W,onRest:M},t))}return function(){}}),[m,H]),p?e.createElement(a.div,{ref:A,className:"".concat(_," ").concat(E),style:N},S):q?e.createElement(q,{ref:A,className:E}):e.cloneElement(S,{ref:A,className:E})};A.propTypes={useTransitionLayoutDivContainer:m.bool,target:m.oneOfType([m.array,m.object]).isRequired,handleIsTransitionStart:m.func,handleIsTriggerDone:m.func};export{A as TransitionLayout};
//# sourceMappingURL=index.es.js.map
